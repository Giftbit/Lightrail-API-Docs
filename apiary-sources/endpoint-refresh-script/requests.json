{
  "calls": [
    {
      "callId": "ping1",
      "method": "GET",
      "endpoint": "/ping",
    },
    {
      "callId": "giftCardProgram1",
      "method": "POST",
      "endpoint": "/programs",
      "body": {
        "name": "USD Gift Cards",
        "currency": "USD",
        "codeValueMin": 0,
        "codeValueMax": 20000,
        "userSuppliedId": "giftCardProgram1",
        "valueStoreType": "PRINCIPAL"
      }
    },
    {
      "callId": "promotion1",
      "method": "POST",
      "endpoint": "/programs",
      "body": {
        "name": "Simple Promotion",
        "currency": "USD",
        "codeValueMin": 0,
        "codeValueMax": 20000,
        "userSuppliedId": "promotion1",
        "valueStoreType": "ATTACHED"
      }
    },
    {
      "callId": "listPrograms1",
      "method": "GET",
      "endpoint": "/programs"
    },
    {
      "callId": "createContact1",
      "method": "POST",
      "endpoint": "/contacts",
      "body": {
        "userSuppliedId": "createContact1",
        "email": "alice@example.com"
      }
    },
    {
      "callId": "createContact2",
      "method": "POST",
      "endpoint": "/contacts",
      "body": {
        "userSuppliedId": "createContact2",
        "email": "bill@example.com"
      }
    },
    {
      "callId": "patchContact2",
      "method": "PATCH",
      "endpoint": "/contacts/{REQUEST_REPLACEMENT:createContact2.response.body.contact.contactId}",
      "body": {
        "firstName": "bill",
        "lastName": "lumbergh"
      }
    },
    {
      "callId": "listContacts1",
      "method": "GET",
      "endpoint": "/contacts"
    },
    {
      "callId": "createCard1",
      "method": "POST",
      "endpoint": "/cards",
      "body": {
        "userSuppliedId": "giftcard-3asfd34a",
        "programId": "{REQUEST_REPLACEMENT:giftCardProgram1.response.body.program.programId}",
        "initialValue" : 5000,
        "cardType" : "GIFT_CARD"
      }
    },
    {
      "callId": "getCard1Card",
      "method": "GET",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCard1.response.body.card.cardId}"
    },
    {
      "callId": "getCard1Fullcode",
      "method": "GET",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCard1.response.body.card.cardId}/fullcode"
    },
    {
      "callId": "getCard1FullcodeDetails",
      "method": "GET",
      "endpoint": "/codes/{REQUEST_REPLACEMENT:getCard1Fullcode.response.body.fullcode.code}/details"
    },
    {
      "callId": "getCard1Details",
      "method": "GET",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCard1.response.body.card.cardId}/details"
    },
    {
      "callId": "getCard1Categories",
      "method": "GET",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCard1.response.body.card.cardId}/categories"
    },
    {
      "callId": "getCard1ValueStores",
      "method": "GET",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCard1.response.body.card.cardId}/valueStores"
    },
    {
      "callId": "listCards1",
      "method": "GET",
      "endpoint": "/cards"
    },
    {
      "callId": "listCategories1",
      "method": "GET",
      "endpoint": "/categories"
    },
    {
      "callId": "createTransaction1Card1Dryrun",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCard1.response.body.card.cardId}/transactions/dryRun",
      "body": {
        "userSuppliedId":"transaction-234342",
        "value":-250,
        "currency":"USD",
        "nsf": false,
        "metadata":{
          "cart":{
            "total":250,
            "items":[
              {
                "id":"B000F34ZKS",
                "quantity":1,
                "unit_price":150,
                "tags":[
                  "gear",
                  "outdoor",
                  "clearance"
                ]
              },
              {
                "id":"B009L1MF7A",
                "quantity":2,
                "unit_price":100,
                "tags":[
                  "apparel",
                  "outdoor"
                ]
              }
            ]
          }
        }
      }
    },
    {
      "callId": "createTransaction1Card1",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCard1.response.body.card.cardId}/transactions",
      "body": {
        "userSuppliedId":"transaction-234342",
        "value":-250,
        "currency":"USD",
        "metadata":{
          "cart":{
            "total":250,
            "items":[
              {
                "id":"B000F34ZKS",
                "quantity":1,
                "unit_price":150,
                "tags":[
                  "gear",
                  "outdoor",
                  "clearance"
                ]
              },
              {
                "id":"B009L1MF7A",
                "quantity":2,
                "unit_price":100,
                "tags":[
                  "apparel",
                  "outdoor"
                ]
              }
            ]
          }
        }
      }
    },
    {
      "callId": "createTransaction2Card1FullcodeDryrun",
      "method": "POST",
      "endpoint": "/codes/{REQUEST_REPLACEMENT:getCard1Fullcode.response.body.fullcode.code}/transactions/dryRun",
      "body": {
        "userSuppliedId":"transaction-234aweras4",
        "value":-100,
        "currency":"USD"
      }
    },
    {
      "callId": "createTransaction2Card1Fullcode",
      "method": "POST",
      "endpoint": "/codes/{REQUEST_REPLACEMENT:getCard1Fullcode.response.body.fullcode.code}/transactions",
      "body": {
        "userSuppliedId":"transaction-234aweras4",
        "value":-100,
        "currency":"USD"
      }
    },
    {
      "callId": "getCard1Transactions",
      "method": "GET",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCard1.response.body.card.cardId}/transactions"
    },
    {
      "callId": "getCard1TransactionsByFullcode",
      "method": "GET",
      "endpoint": "/codes/{REQUEST_REPLACEMENT:getCard1Fullcode.response.body.fullcode.code}/transactions"
    },
    {
      "callId": "patchCard1",
      "method": "PATCH",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCard1.response.body.card.cardId}",
      "body": {
        "contactId": "{REQUEST_REPLACEMENT:createContact2.response.body.contact.contactId}"
      }
    },
    {
      "callId": "getCardsForContact2",
      "method": "GET",
      "endpoint": "/cards?contactId={REQUEST_REPLACEMENT:createContact2.response.body.contact.contactId}"
    },
    {
      "callId": "createCardStateChange1",
      "method": "POST",
      "endpoint": "/cards",
      "body": {
        "userSuppliedId": "giftcard-a45etsraw",
        "programId": "{REQUEST_REPLACEMENT:giftCardProgram1.response.body.program.programId}",
        "initialValue": 5000,
        "cardType": "GIFT_CARD",
        "inactive": true
      }
    },
    {
      "callId": "createCardStateChange1Activate",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCardStateChange1.response.body.card.cardId}/activate",
      "body": {
        "userSuppliedId": "activate-giftcard-a45etsraw"
      }
    },
    {
      "callId": "createCardStateChange1Freeze",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCardStateChange1.response.body.card.cardId}/freeze",
      "body": {
        "userSuppliedId": "freeze-{REQUEST_REPLACEMENT:createCardStateChange1Activate.response.body.transaction.transactionId}"
      }
    },
    {
      "callId": "createCardStateChange1Unfreeze",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCardStateChange1.response.body.card.cardId}/unfreeze",
      "body": {
        "userSuppliedId": "unfreeze-{REQUEST_REPLACEMENT:createCardStateChange1Freeze.response.body.transaction.transactionId}"
      }
    },
    {
      "callId": "createCardStateChange1Cancel",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createCardStateChange1.response.body.card.cardId}/cancel",
      "body": {
        "userSuppliedId": "cancel-{REQUEST_REPLACEMENT:createCardStateChange1Unfreeze.response.body.transaction.transactionId}"
      }
    },
    {
      "callId": "createAccountCard",
      "method": "POST",
      "endpoint": "/cards",
      "body": {
        "userSuppliedId":"{REQUEST_REPLACEMENT:createContact1.response.body.contact.contactId}-account",
        "cardType":"ACCOUNT_CARD",
        "contactId":"{REQUEST_REPLACEMENT:createContact1.response.body.contact.contactId}",
        "currency":"USD",
        "initialValue":500
      }
    },
    {
      "callId": "createPendingTransactionAccountCard",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createAccountCard.response.body.card.cardId}/transactions",
      "body": {
        "userSuppliedId":"transaction-dr67fgig13",
        "value":-100,
        "currency":"USD",
        "pending": true
      }
    },
    {
      "callId": "capturePendingTransactionAccountCard",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createAccountCard.response.body.card.cardId}/transactions/{REQUEST_REPLACEMENT:createPendingTransactionAccountCard.response.body.transaction.transactionId}/capture",
      "body": {
        "userSuppliedId":"{REQUEST_REPLACEMENT:createPendingTransactionAccountCard.response.body.transaction.transactionId}-capture"
      }
    },
    {
      "callId": "refundTransactionAccountCard",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createAccountCard.response.body.card.cardId}/transactions/{REQUEST_REPLACEMENT:capturePendingTransactionAccountCard.response.body.transaction.transactionId}/refund",
      "body": {
        "userSuppliedId":"{REQUEST_REPLACEMENT:capturePendingTransactionAccountCard.response.body.transaction.transactionId}-refund"
      }
    },
    {
      "callId": "createPendingTransactionToVoidAccountCard",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createAccountCard.response.body.card.cardId}/transactions",
      "body": {
        "userSuppliedId":"transaction-a4rwsaw3fds",
        "value":-100,
        "currency":"USD",
        "pending": true
      }
    },
    {
      "callId": "voidPendingTransactionAccountCard",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createAccountCard.response.body.card.cardId}/transactions/{REQUEST_REPLACEMENT:createPendingTransactionToVoidAccountCard.response.body.transaction.transactionId}/void",
      "body": {
        "userSuppliedId":"{REQUEST_REPLACEMENT:createPendingTransactionToVoidAccountCard.response.body.transaction.transactionId}-void"
      }
    },
    {
      "callId": "addPromotionToAccount",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createAccountCard.response.body.card.cardId}/valueStores",
      "body": {
        "userSuppliedId":"{REQUEST_REPLACEMENT:createAccountCard.response.body.card.cardId}-promotion1",
        "currency": "USD",
        "programId":"{REQUEST_REPLACEMENT:promotion1.response.body.program.programId}",
        "initialValue":150
      }
    },
    {
      "callId": "freezePromotionOnAccount",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createAccountCard.response.body.card.cardId}/valueStores/{REQUEST_REPLACEMENT:addPromotionToAccount.response.body.valueStore.valueStoreId}/freeze",
      "body": {
        "userSuppliedId":"{REQUEST_REPLACEMENT:addPromotionToAccount.response.body.valueStore.valueStoreId}-freeze"
      }
    },
    {
      "callId": "unfreezePromotionOnAccount",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createAccountCard.response.body.card.cardId}/valueStores/{REQUEST_REPLACEMENT:addPromotionToAccount.response.body.valueStore.valueStoreId}/unfreeze",
      "body": {
        "userSuppliedId":"{REQUEST_REPLACEMENT:freezePromotionOnAccount.response.body.transaction.transactionId}-Unfreeze"
      }
    },
    {
      "callId": "cancelPromotionOnAccount",
      "method": "POST",
      "endpoint": "/cards/{REQUEST_REPLACEMENT:createAccountCard.response.body.card.cardId}/valueStores/{REQUEST_REPLACEMENT:addPromotionToAccount.response.body.valueStore.valueStoreId}/cancel",
      "body": {
        "userSuppliedId":"{REQUEST_REPLACEMENT:unfreezePromotionOnAccount.response.body.transaction.transactionId}-cancel"
      }
    },
    {
      "callId": "deliverGiftCard",
      "method": "POST",
      "endpoint": "/turnkey/giftcard/deliver",
      "body": {
        "cardId":"{REQUEST_REPLACEMENT:createCard1.response.body.card.cardId}",
        "message": "Hi there, please enjoy this gift.",
        "senderName": "The Rocketship team",
        "recipientEmail": "tim@giftbit.com"
      }
    }
  ]
}